<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta name="description" content="" />
    <meta name="author" content="" />

    <title>Landing Page - Start Bootstrap Theme</title>

    <!-- Bootstrap core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet" />

    <!-- Custom fonts for this template -->
    <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet" />
    <link
      href="vendor/simple-line-icons/css/simple-line-icons.css"
      rel="stylesheet"
      type="text/css"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic,700italic"
      rel="stylesheet"
      type="text/css"
    />

    <!-- Custom styles for this template -->
    <link href="css/landing-page.css" rel="stylesheet" />
  </head>

  <body>
    <!-- Navigation -->
    <nav class="navbar navbar-light bg-light static-top">
      <div class="container">
        <a class="navbar-brand" href="#">Online Currency Convertor</a>
        <a class="nav-item" href="#">About us</a>
      </div>
    </nav>

    <!-- Masthead -->
    

    <main role="main">
      <div class="album py-5 bg-light">
        <div class="container">
          <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
              <li class="breadcrumb-item"><a href="/">Home</a></li>
              <li class="breadcrumb-item"><a href="blog.html">Blog</a></li>
              <li class="breadcrumb-item active" aria-current="page">~Title~</li>
            </ol>
          </nav>

          <div class="row">
            <div class="col-md-12">
              <div class="card mb-4 box-shadow">
                <img class="card-img-top" data-src="holder.js/100px225?theme=thumb&amp;bg=55595c&amp;fg=eceeef&amp;text=Thumbnail" alt="Thumbnail [100%x225]" style="height: 425px; width: 100%; display: block;" src="data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%22348%22%20height%3D%22225%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%20348%20225%22%20preserveAspectRatio%3D%22none%22%3E%3Cdefs%3E%3Cstyle%20type%3D%22text%2Fcss%22%3E%23holder_16ec146a831%20text%20%7B%20fill%3A%23eceeef%3Bfont-weight%3Abold%3Bfont-family%3AArial%2C%20Helvetica%2C%20Open%20Sans%2C%20sans-serif%2C%20monospace%3Bfont-size%3A17pt%20%7D%20%3C%2Fstyle%3E%3C%2Fdefs%3E%3Cg%20id%3D%22holder_16ec146a831%22%3E%3Crect%20width%3D%22348%22%20height%3D%22225%22%20fill%3D%22%2355595c%22%3E%3C%2Frect%3E%3Cg%3E%3Ctext%20x%3D%22116.2265625%22%20y%3D%22120.3%22%3EThumbnail%3C%2Ftext%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E" data-holder-rendered="true">
                <div class="card-body">
                  <p class="card-text">This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.</p>
                  <div class="d-flex justify-content-between align-items-center">
                    <div class="btn-group">
                      <button type="button" class="btn btn-sm btn-outline-secondary">View</button>
                      <button type="button" class="btn btn-sm btn-outline-secondary">Edit</button>
                    </div>
                    <small class="text-muted">9 mins</small>
                  </div>
                </div>
              </div>
            </div>
            
          </div>
        </div>
      </div>

    </main>

    <!-- Footer -->
    <footer class="footer bg-light">
      <div class="container">
        <div class="row">
          <div class="col-lg-6 h-100 text-center text-lg-left my-auto">
            <ul class="list-inline mb-2">
              <li class="list-inline-item">
                <a href="#">About</a>
              </li>
              <li class="list-inline-item">&sdot;</li>
              <li class="list-inline-item">
                <a href="#">Contact</a>
              </li>
              <li class="list-inline-item">&sdot;</li>
              <li class="list-inline-item">
                <a href="#">Terms of Use</a>
              </li>
              <li class="list-inline-item">&sdot;</li>
              <li class="list-inline-item">
                <a href="#">Privacy Policy</a>
              </li>
            </ul>
            <p class="text-muted small mb-4 mb-lg-0">
              &copy; Online Currency Convertor 2019. All Rights Reserved.
            </p>
          </div>
          <div class="col-lg-6 h-100 text-center text-lg-right my-auto">
            <ul class="list-inline mb-0">
              <li class="list-inline-item mr-3">
                <a href="#">
                  <i class="fab fa-facebook fa-2x fa-fw"></i>
                </a>
              </li>
              <li class="list-inline-item mr-3">
                <a href="#">
                  <i class="fab fa-twitter-square fa-2x fa-fw"></i>
                </a>
              </li>
              <li class="list-inline-item">
                <a href="#">
                  <i class="fab fa-instagram fa-2x fa-fw"></i>
                </a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </footer>

    <!-- Bootstrap core JavaScript -->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
	  <script>
		  
		  google.charts.load('current', {packages: ['corechart', 'line']});
google.charts.setOnLoadCallback(drawBasic);

    function drawBasic() {

      var today = new Date();
      var dd = String(today.getDate()).padStart(2, '0');
      var mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!
      var yyyy = today.getFullYear();

      today = `${yyyy}-${mm}-${dd}`;

      var oneWeekAgo = new Date();
      oneWeekAgo.setDate((new Date()).getDate() - 30);

      dd = String(oneWeekAgo.getDate()).padStart(2, '0');
      mm = String(oneWeekAgo.getMonth() + 1).padStart(2, '0'); //January is 0!
      yyyy = oneWeekAgo.getFullYear();

      oneWeekAgo = `${yyyy}-${mm}-${dd}`;

      fetch(`https://api.exchangeratesapi.io/history?start_at=${oneWeekAgo}&end_at=${today}&symbols=${fromCurrency},${toCurrency}&base=${fromCurrency}`)
          .then(response => response.json())
          .then(response => {
              var rates = response.rates;
              var keys = Object.keys(rates);
              keys = keys.sort();

              var history = keys.map(key => {
                return [key, rates[key][toCurrency]];
              })

              var data = new google.visualization.DataTable();
              data.addColumn('string', 'Time');
              data.addColumn('number', 'Rate');

              data.addRows(history);

              var options = {
                hAxis: {
                  title: 'Time'
                },
                vAxis: {
                  title: 'Rate'
                }
              };

              var chart = new google.visualization.LineChart(document.getElementById('chart_div'));

              chart.draw(data, options);
          });
    }
    </script>
    
    <script>
      var currencies = [];
      var fromCurrency = false;
      var toCurrency = false;

      fetch('https://api.exchangeratesapi.io/latest')
      .then(response => response.json())
      .then(response => {
        currencies = Object.keys(response.rates);
        currencies = currencies.sort();

        var list = currencies.map(currency => {
          return "<a class='dropdown-item' onClick='fromClick(\"" + currency + "\")'>" + currency + "</a>"
        });

        $('#fromDropdown').html(list.join(' '));
        fromClick(currencies[0]);

        list = currencies.map(currency => {
          return "<a class='dropdown-item' onClick='toClick(\"" + currency + "\")'>" + currency + "</a>"
        });
        $('#toDropdown').html(list.join(' '));
        toClick(currencies[1]);
      });

      function fromClick(currency) {
        fromCurrency = currency;
        $('#dropdownMenuButtonFrom').text(currency);

        if(toCurrency) {
          calc();
          drawBasic();
        }
      }

      function toClick(currency) {
        toCurrency = currency;
        $('#dropdownMenuButtonTo').text(currency);

        if(fromCurrency) {
          calc();
          drawBasic();
        }
      }

      function calc() {
        if(!fromCurrency || !toCurrency) {
          return;
        }

        fetch(`https://api.exchangeratesapi.io/latest?symbols=${fromCurrency},${toCurrency}&base=${fromCurrency}`)
          .then(response => response.json())
          .then(response => {
              var rate = response.rates[toCurrency];
              var amount = parseFloat($('#inputSum').val());
              var result = parseFloat(rate) * amount;
              $('#resultDiv').html(result);
          });
      }

      $('#inputSum').on('input', () => {
        calc();
      });

    </script>
  </body>
</html>
